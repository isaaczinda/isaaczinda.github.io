<!DOCTYPE html>
<html>
	<head>
		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=yes"/>
		<meta charset="utf-8">

		<title>RainCheck</title>

		<!-- jquery -->
		<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>

		<!-- boostrap includes -->
		<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.min.js"></script>

		<!-- my includes -->
		<link rel="stylesheet" type="text/css" href="https://bootswatch.com/superhero/bootstrap.min.css"/>
		<link rel="stylesheet" type="text/css" href="css/style.css"/>
	</head>
	<body>
		<nav class="navbar navbar-default navbar-fixed-top">
		  <div class="container-fluid">
		    <!-- Brand and toggle get grouped for better mobile display -->
		    <div class="navbar-header">
		      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1" aria-expanded="false">
		        <span class="sr-only">Toggle navigation</span>
		        <span class="icon-bar"></span>
		        <span class="icon-bar"></span>
		        <span class="icon-bar"></span>
		      </button>
		      <a class="navbar-brand" href="#">RainCheck</a>
		    </div>

		    <!-- Collect the nav links, forms, and other content for toggling -->
		    <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
		      <ul class="nav navbar-nav">
		        <li><a href="index.html">Home<span class="sr-only">(current)</span></a></li>
		        <li><a href="about.html">About<span class="sr-only">(current)</span></a></li>
		        <li><a href="building-kernel.html">Building the Kernel<span class="sr-only">(current)</span></a></li>
		        <li><a href="capacitance-values.html">Getting the Capacitance Values<span class="sr-only">(current)</span></a></li>
		        <li class="active"><a href="water-rejection.html">Water Rejection Algorithms<span class="sr-only">(current)</span></a></li>
		        <li><a href="tools.html">Tools<span class="sr-only">(current)</span></a></li>
		      </ul>
		    </div><!-- /.navbar-collapse -->
		  </div><!-- /.container-fluid -->
		</nav>
		<div class = "container-fluid">
			<div class= "row">
				<div class="col-lg-12">
					<!-- startcontent -->
<h1>Implementing Water Rejection</h1>
<h2>Infrestructure</h2>
<p>The first step in implementing water rejection was the creation of two kernel proc files from the touch_synaptics_ds5.c kernel module. One of these files contained the raw capacitance data, and the other contained the phone's default touch point data. Using a python file, I was able to visualize the capacitance data and gain an annecdotal understanding of how water effects the touchscreen.</p>
<h2>Recording</h2>
<p>I then created a battery of python scripts to record data coming from the proc files. With the aid of these tools I was able to record about 10 minutes and 10,000 frames of touch data, which each contained the capacitance matrix and the phone's touch points. More about these specific files is outlined in the <a href="tools.html" title="Tools">Tools</a> section.</p>
<h2>Analysis</h2>
<p>I created a tool in python to test the results of different tests. In each frame, the number of real touches and the number of reported touches were known, so I could analyze the accuracy of each touch filtering algorithm by looking at the difference between the reported and actual touches. The algorithms each had different parameters, which were optimized automatically by my script. Here is a graph of my best algorithm and its optimizations.</p>
<p><img src="AlgorithmGraph.png" alt="Graph of the Optimization of my Algorithm"></p>
<h2>Results</h2>
<p>The best of my ten algorithms identified only 12 points incorrectly as touches.  The default algorithm identified 3199 points incorrectly as touches. This work out to be over a 34% error rate, while the error rate of my algorithm was just .1%.</p>
<p>Below is a graph of the default touch detection compared with three of my best algorithms:</p>
<p><img src="AlgorithmComparison.png" alt="Graph of the Default Touch Detection Compared to my Algorithms"></p>
<h2>Future Work</h2>
<p>The algorithm will be refined further, and tested on a far larger data set gathered from many users. The algorithm processing will be completed in the phone's kernel, not in a python program on an external computer, for speed and ease of use. My program in the kernel would modify the system's /proc files, which would allow the entire system, not just one app, to use RainCheck's functionality.</p>
<!-- endcontent -->
				</div>
			</div>
		</div>
	</body>
</html>