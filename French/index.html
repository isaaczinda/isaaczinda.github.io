<!DOCTYPE html>
</html>
	<head>
		<link rel="stylesheet" type="text/css" href="css/bootstrap.min.css">
	</head>
	
	<body>
		<div id = "Modal" class="modal fade bs-example-modal-sm" tabindex="-1" role="dialog" aria-labelledby="mySmallModalLabel" aria-hidden="true">
		  <div class="modal-dialog">
			   <div class="modal-header">
		        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
		        <h4 class="modal-title">Modal title</h4>
		      </div>
		      <div class="modal-body">
		        <p>Type a valid verb!&hellip;</p>
		      </div>
		      <div class="modal-footer">
		        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
		      </div>
		  </div>
		</div>


		<div class = "container-fluid">
			<div class="jumbotron">
			  <h1>Welcome to the French Verb Conjugator</h1>
			  <p>The database includes over 600 verbs and </p>
			  <p><a class="btn btn-primary btn-lg" href="#" role="button">Learn more</a></p>
			</div>
			<div class="row">
			  <div class="col-lg-6">
			    <div class="input-group">
			      <input type="text" id = "SearchTextbox" class="form-control input-lg" placeholder="Search for french verbs...">
			      <span class="input-group-btn">
			        <button class="btn btn-lg btn-primary" id = "SearchButton" type="button">Search</button>
			      </span>
			    </div><!-- /input-group -->
			  </div><!-- /.col-lg-6 -->
			  <div class = "col-xs-12" id = "Verbs"></div>
			</div><!-- /.row -->
		</div>

		
	</body>

	<script src="js/jquery.js"></script>
	<script src="js/bootstrap.min.js"></script>

	<script>
		var Tenses = new Array("indicatif present", "indicatif futur simple", "indicatif passe compose", "indicatif plus-que-parfait", "indicatif imparfait");
		var VerbList = "";

		function GetVerbList()
		{
			var File = "database/VerbList.txt";

			$.ajax(
		    {
				url: File,
				beforeSend: function(xhr) 
				{
					xhr.overrideMimeType("text/plain; charset=utf8");
				}
			}
			).done(function(data) 
			{

				VerbList = data.replace(/ /g, '');
				console.log(VerbList);
			});
		}

		function DatabaseFile(Verb, Conjugation)
		{
			var File = "database/" + Verb + "/" + Conjugation + ".txt";

			$.ajax(
		    {
				url: File,
				beforeSend: function(xhr) 
				{
					xhr.overrideMimeType("text/plain; charset=utf8");
				}
			}
			).done(function(data) 
			{
				AppendToDOM(Verb, Conjugation, data);
			});
		}

		function AppendToDOM(Verb, Conjugation, ToAppend)
		{
			$("#Verbs").append("<h3 class = 'sub-title'>" + Conjugation + "</h3>");

			var lines = ToAppend.split("\n");
			
			for(i = 0; lines[i] != ""; i++)
			{
				$("#Verbs").append("<p class = 'paragraph'>" + lines[i] + "</p>");
			}
		}

		function Search()
		{
			var Verb = $("#SearchTextbox").val().toLowerCase();

			if(!(VerbList.indexOf("\n" + Verb + "\n") > 0))
			{
				$('#Modal').modal('show');
				//alert("That's not a french verb (that we know of).");
				return -1;
			}

			$("#Verbs").empty();

			$("#Verbs").append("<h1 class = 'title'>" + Verb + "</h1>");
			for(i = 0; i < Tenses.length; i++)
			{
				DatabaseFile(Verb, Tenses[i]);
			}
		}

		$(document).ready(function()
		{
			$('#Modal').modal('hide');

			GetVerbList();

			$("#SearchTextbox").bind('keypress', function(e) 
			{
				if(e.keyCode==13)
				{
					Search();
				}
			});

			$("#SearchButton").click(function() 
			{
				Search();
			});
		});
	</script>
</html>